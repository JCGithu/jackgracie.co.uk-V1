!function(){var e={updateValues:async function(e){e.inputText=document.getElementById("input").value,e.finalText=document.getElementById("output"),e.finalBox=document.getElementById("outputBox"),e.copyButton=document.getElementById("copyButton")},copy:function(e){const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}};const{copy:t}=e;var n={success:function(e,n){n.output.innerHTML="";const o=document.createElement("select"),u=document.createElement("div"),c=document.createElement("button"),a=document.createElement("button");for(var i in function(e){const t=document.createElement("option");t.value="",t.innerHTML="Select quality",e.append(t)}(o),o.classList.add("p-2","m-3","rounded"),c.classList.add("p-3","bg-green-400","text-white","font-bold","rounded","mx-4"),a.classList.add("w-auto","bg-white","text-black","p-2","px-3","rounded","mx-4"),u.classList.add("flex-row","m-4"),a.setAttribute("x-on:click","open=false"),a.innerHTML="Close",a.onclick=()=>{n.output.innerHTML=""},o.onchange=()=>{u.prepend(c),c.innerHTML="Copy Link"},c.onclick=()=>{t(o.value)},e){let t=e[i];console.log(t);const n=document.createElement("option");n.innerHTML=t.text,n.value=t.url,o.append(n)}u.append(a),n.output.append(o,u)},fail:function(e){},loading:function(e){const t=document.createElement("div");t.innerHTML="Sourcing...",t.classList.add("w-auto","text-black","py-4","px-5","rounded","mx-4"),e.output.append(t)}},o={youtube:{triggers:["youtube.com","youtu.be"],regex:[/(?<=\/|v\=)([^".&?\/\s]{11})/gi]},periscope:{triggers:["pscp.tv"],regex:[/(?<=\/w\/)[0-9A-Za-z]+/g,/(?<=\/)[0-9A-Za-z]{13}(?![\/\.])/g]},parliament:{triggers:["parliament.tv"],regex:[/[0-9A-Za-z]+-[0-9A-Za-z]+-[0-9A-Za-z]+-[0-9A-Za-z]+-[0-9A-Za-z]+/g]}};const{loading:u}=n;async function c(e,t){for(let o in e.regex){let u=e.regex[o];var n=t.match(u);if(null===n){if(o<Object.keys(e.regex).length)continue;return!1}return e.token=n,e}}async function a(e,t){for(let n in e.triggers){let o=e.triggers[n];if(1==t.includes(o)){let n=await c(e,t);if(n)return n}else if(n==Object.keys(e.triggers).length)return!1}}const{updateValues:i}=e,{success:r,fail:l,loading:d}=n,s={input:document.getElementById("input"),output:document.getElementById("output"),run:document.getElementById("run")};s.run.addEventListener("click",(async function(){i(s),s.inputText=s.input.value,d(s);let e=await async function(e){let t=await async function(e){for(let t in o){let n=o[t],u=await a(n,e);if(u)return u.page=t,u;if(t==Object.keys(o).length)return!1}}(e.inputText);if(t){let e=`https://sinon-api.herokuapp.com/${t.page}/${t.token}`;var n=await fetch(e);return await n.json()}return!1}(s);console.log(e),e?r(e,s):l(s)}))}();